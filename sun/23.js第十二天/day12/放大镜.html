<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
		*{
			padding: 0;
			margin: 0;
		}
			.small{
				width: 350px;
				height: 218px;
				border: 1px solid #000;
				float: left;
				position: relative;
				margin: 10px  0 0 100px;
			}
			.pop{
				width: 100px;
				height: 100px;
				background: yellow;
				opacity: .5;
				position: absolute;
				left: 0;
				top: 0;
				display: none;
				cursor: move;
			}
			.big{
				width: 500px;
				height: 311px;
				border: 1px solid #000;
				float: left;
				display: none;
				overflow: hidden;
				position: relative;
			}
			.big img{
				display: block;
				position: absolute;
			}
		</style>
	</head>
	<body>
	<div>
		<div class="small">
			<img src="img/1.jpg" alt="" />
			<div class="pop"></div>
		</div>
		<div class="big">
			<img src="img/2.jpg" alt="" />
		</div>
	</div>
	</body>
	<script type="text/javascript">
		var small = document.getElementsByClassName("small")[0];
		var pop = document.getElementsByClassName("pop")[0];
		var big = document.getElementsByClassName("big")[0];
		var img = document.getElementsByTagName("img")[1];
		
		var maxleft;
		var maxtop;
		
		small.addEventListener("mouseover",function(e){
			pop.style.display = "block";
			big.style.display = "block";
			maxleft = small.offsetWidth - pop.offsetWidth;
			maxtop = small.offsetHeight - pop.offsetHeight;
			
		},false);
		small.addEventListener("mouseout",function(e){
			pop.style.display = "none";
			big.style.display = "none";
			
			
		},false);
		
		small.addEventListener("mousemove",function(e){
			var popleft = e.clientX-small.offsetLeft-pop.offsetWidth/2;
			var poptop = e.clientY-small.offsetTop-pop.offsetHeight/2;
			//限制pop左边界和上边界
			popleft = popleft<=0?0:popleft;
			poptop = poptop<=0?0:poptop;
			
			//限制pop右边界和下边界
			popleft = popleft>=maxleft?maxleft:popleft;
			poptop = poptop>=maxtop?maxtop:poptop;
			
//			pop.style.display = "block";
			pop.style.left = popleft + "px";
			pop.style.top = poptop + "px";
			
			img.style.left = -popleft*0.8+"px";
			img.style.top = -poptop*1.1+"px";
		},false);
		
	</script>
</html>
