<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
	</body>
	<script type="text/javascript">
		/* 步骤一：创建XMLHttpRequest */
		
//		var xhr = new XMLHttpRequest();
//		ie5和ie6
//		xhr = ActiveXObject("Microsoft.XMLHTTP");

//		兼容版本
		function createXHR(){
			if(window.XMLHttpRequest){
				return new XMLHttpRequest;
			}else{
				return new ActiveXObject("Microsoft.XMLHTTP");
			}
		}
		var xhr = createXHR();
		
		
		/*步骤二：调用 opan 方法
		 * 参数一：请求方法  get 或 post
		 * 参数二：请求URL
		 * 参数三：是否异步发出请求，true 表示异步
		 * 	并没有真正的发送网络请求
		*/
		xhr.open("GET","a.txt",true);
		
		//步骤三：监听传入的数据
		xhr.onreadystatechange = function(){
			//如readyState的值为4，表示已经接收完数据，可以开始对数据处理
			//404：资源没有找到     500：服务器内部问题
			if(xhr.readyState==4){
				// xhr.status 保存了服务的响应码，  200表示正常响应
				if(xhr.status==200){
					console.log(xhr.responseText);
				}
				console.log(xhr.readyState);
			}
		}
		
		/*
		 * 步骤四:真正的发出请求
		 * get 请求传入 null 即可
		 * post请求
		 */
		xhr.send(null);
	</script>
</html>
