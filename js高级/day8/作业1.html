<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#aa{
				width: 300px;
				height: 400px;
				text-align: center;
				margin: 100px 200px;
				border: 1px solid #000;
			}
			#box{
				width: 300px;
				height: 300px;
				border-radius: 50%;
			}
			
			img {
				width: 300px;
				height: 300px;
			}
		</style>
	</head>

	<body>
		<div id="aa">
			<div id="box">
				<img src="img/风扇.png" alt="" />
			</div><br>
			<hr>
			<button id="btn">开关</button>
			<button id="btn1">一档</button>
			<button id="btn2">二档</button>
			<button id="btn3">三档</button>
			<button id="btn4">换方向</button>
		</div>
	</body>
	<script type="text/javascript">
		var aa;

		function feng(j, k) {
			this.j = j;
			this.k = k;
		}
		feng.prototype.zz = function() {
			var startTime = new Date(),
				duration = 1000,
				p;
				var a = this.k,b = this.j;
			 aa = requestAnimationFrame(function step(){
				p = Math.min(1, (new Date() - startTime) / duration);
				box.style.transform = "rotateZ(" + a * b * 360 * p + "deg)";
					if(p < 1) {
						aa = requestAnimationFrame(step);
					} else {
						startTime = new Date();
						aa = requestAnimationFrame(step);
					}
				}.bind(this));
		}
		var i = 0,a=1,b,f;
		
		btn1.onclick = function(){a=a;b=1;}
		btn2.onclick = function(){a=a;b=2;}
		btn3.onclick = function(){a=a;b=5;}
		btn4.onclick = function(){a=-1*a;}
		btn.onclick = function(){
			i++;
			if(i%2!=0){
				a = 1,b = 1;
			}else{
				a = 0,b = 0;
			}
			console.log(i);
		}
		onclick = function(){
			f = new feng(a,b);	
			f.zz();
		}
	</script>

</html>